# ANALYSIS — OpenLibrary API Testing

## 1. Общая оценка стабильности API
API протестирован по 7 направлениям: функциональность, классы эквивалентности, граничные значения, негативные сценарии, безопасность, rate limiting, ISBN.  
Состояние: **в целом стабильное**, кроме трех выявленных аномалий.

---

## 2. Найденные аномалии

### A1 — 500 Internal Server Error на спецсимволах
Причина: отсутствие валидации и незащищённый парсинг данных (Decimal(None)).  
Риски: DoS, утечка внутренних деталей.

### A2 — q < 3 вызывает 422  
Undocumented правило минимальной длины строки.

### A3 — XSS возвращается как строка  
Backend безопасен, но frontend может ошибиться.


---

## 3. Покрытие тестами
Параметр q покрыт: EC, BVA, Unicode, спецсимволы, XSS, SQLi, отсутствие параметров, неверные методы.  
ISBN покрыт валидными и невалидными сценариями.

---

## 4. Гипотезы причин (Root Cause)

### A1  
Неконсистентные данные в docs → спецсимволы выбрали запись без поля → попытка конвертировать None в Decimal → crash.

### A2  
Рабочая бизнес-логика без документации.

### A3  
Фронтенд-риск, backend работает корректно.

---

## 5. Риск-матрица

| Аномалия | Severity | Probability | Risk |
|---------|----------|-------------|------|
| 500 на спецсимволах | High | Medium | High |
| q < 3 → 422 | Low | High | Medium |
| XSS строкой | Medium | Low | Low |

---

## 6. Рекомендации

### Backend
- добавить sanitize/escaping  
- убрать traceback из ответа  
- документировать правила q  
- безопасно обрабатывать None

### Документация
- описать ограничения q  
- указать допустимые символы

### QA
- добавить fuzzing  
- тестировать комбинации параметров

---

## 7. Вывод
API устойчив для нормального ввода, но нестабилен при нестандартном.  
Критический дефект — **500 Internal Error на спецсимволах**.


